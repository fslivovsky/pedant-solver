<!--
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
-->

# Pedant
Pedant is a solver for dependency quantified boolean formulas (DQBFs) based on interpolation-based definition extraction.


## Installing PEDANT
We only provide instructions for building PEDANT on a LINUX system. For other systems consider using a virtual machine.
<!--
# install [UNIGEN 3](https://github.com/meelgroup/unigen)
-->

```
sudo apt install git
sudo apt install cmake
sudo apt install g++
sudo apt install libboost-all-dev
sudo apt install libmlpack-dev
git clone https://github.com/perebor/pedant-solver
cd pedant
git submodule init
git submodule update
mkdir build && cd build
cmake ..
make
```

To build PEDANT without support for machine learning use ```cmake -DUSE_ML=OFF..``` instead of ```cmake .. ```. In this case ```sudo apt install libmlpack-dev``` can be omitted.
Note: Currently, the usage of machine learning is not really necessary. But this may change.

## Usage
The solver can be run as follows:
```
pedant <Input> [Options]
```

### Input

Pedant expects the input to be given in DQDIMACS format.
DQDIMACS is based on [QDIMCACS](http://www.qbflib.org/qdimacs.html). 
The only difference between DQDIMACS and QDIMACS is that the prefix of a DQDIMACS file may contain lines starting with the character ***d***.
A line starting with ***d*** introduces an existential variable and explicitly gives its dependencies. In the following we give a simple example of a DQDIMACS file:
```
p cnf 4 2
a 1 2 0
d 3 1 0
d 4 2 0
1 -3 0
2 3 4 0
```
In the above example we introduce universal variables 1 and 2, an existential variable 3 that depends on 1 and an existential variable 4 that depends on 2.

### Options
Pedant accepts the subsequent options:
- ```-h, --help``` prints a help message.
- ```-v, --version``` prints the version number.
- ```--cnf file``` In case the given Input is satisfiable a clausal representation of a model is written to ```file``` in the DIMACS format.
- ```--aag file``` prints a help message In case the given Input is satisfiable a circuit representation of a model is written to ```file``` in the ASCII AIGER format.
- ```--aig file``` prints a help message In case the given Input is satisfiable a circuit representation of a model is written to ```file``` in the binary AIGER format.

### Output
The solver will give one of the following outputs:
- It will print ```SATISFIABLE``` and exit with code ```10``` if the given formula is true.
- It will print ```UNSATISFIABLE``` and exit with code ```20``` if the given formula is false.
- It will print ```UNKNOWN``` and exit with code ```0``` if it could not conclude a result. This for example happens if the solver receives an abort signal.

## Validation of certificates
The subdirectory ```Certification``` contains python scripts that can be used to certify SAT-results of Pedant. 
For this purpose the script ```certifyModel.py``` can be used as follows:
```
certifyModel.py <Formula> <Certificate> [Options]
```
### Inputs
- ```Formula``` the DQDIMACS of interest
- ```Certificate``` a certificate that was generated by PEDANT for ```Formula```. The certificate can be given in each of the supported formats.

### Options
- ```check-def``` Checks if the given certificate uniquely defines the assignment of each existential variable for every universal assignment. This option is ignored if an AIGER certificate is given. 
- ```check-cons``` Check if the given certificate is consistent, i.e. there is no universal assignment that makes the certificate unsatisfiable. This option is ignored if an AIGER certificate is given. 
- ```std-dep``` Use the ''standard'' dependencies, instead of the extended dependencies for the check. This option is ignored if an AIGER certificate is given. 

### Output
-  ```0```  if certification succeeded.
-  ```1```  if certification did not succeed.

### Dependencies
This script requires [PySAT](https://pysathq.github.io/) to be installed.
To use the option ```--check-cons``` the 2QBF solver [CADET](https://github.com/MarkusRabe/cadet) has to be installed.


## Example
We illustrate the usage of PEDANT and the validation script with the following sample DQDIMACS, which we call ```formula.dqdimacs```.
```
p cnf 5 3
a 1 2 0
e 3 0
d 4 1 0
d 5 2 0
-1 4 0
2 -5 0
1 -2 3 4
```
To run PEDANT we can use:

```
pedant formula.dqdimacs --aag model
```
This will give the answer ```SATISFIABLE```.
Next we can certify the result by using:
```
certifyModel.py formula.dqdimacs model
```
This will print ```Model validated!```.








<!--

### Library Use

## How to Cite

## Contributors

-->


